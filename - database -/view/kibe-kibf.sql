DELIMITER $$

USE `epus_org_3172100`$$

DROP VIEW IF EXISTS `kibf`$$

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `kibf` AS (SELECT `asal_usul`.`value` AS `asal_usul`,`inv_inventaris_barang`.`keterangan_pengadaan` AS `keterangan_pengadaan`,`keadaan_barang`.`value` AS `keadaan_barang`,`inv_inventaris_distribusi`.`id_ruangan` AS `id_ruangan`,`inv_inventaris_barang`.`harga` AS `harga`,`inv_inventaris_distribusi`.`id_cl_phc` AS `id_cl_phc`,`inv_inventaris_distribusi`.`register` AS `register`,`inv_inventaris_barang`.`pilihan_status_invetaris` AS `pilihan_status_invetaris`,`mst_inv_barang`.`uraian` AS `uraian`,`tingkat`.`value` AS `tingkat`,`beton`.`value` AS `beton`,`tanah`.`value` AS `tanah`,`inv_inventaris_barang`.`barang_kembar_proc` AS `barang_kembar_proc`,`inv_inventaris_barang`.`id_pengadaan` AS `id_pengadaan`,`inv_inventaris_barang_f`.`id_inventaris_barang` AS `id_inventaris_barang`,`inv_inventaris_barang_f`.`id_mst_inv_barang` AS `id_mst_inv_barang`,`inv_inventaris_barang_f`.`bangunan` AS `bangunan`,`inv_inventaris_barang_f`.`pilihan_konstruksi_bertingkat` AS `pilihan_konstruksi_bertingkat`,`inv_inventaris_barang_f`.`pilihan_konstruksi_beton` AS `pilihan_konstruksi_beton`,`inv_inventaris_barang_f`.`luas` AS `luas`,`inv_inventaris_barang_f`.`lokasi` AS `lokasi`,`inv_inventaris_barang_f`.`dokumen_tanggal` AS `dokumen_tanggal`,`inv_inventaris_barang_f`.`dokumen_nomor` AS `dokumen_nomor`,`inv_inventaris_barang_f`.`tanggal_mulai` AS `tanggal_mulai`,`inv_inventaris_barang_f`.`pilihan_status_tanah` AS `pilihan_status_tanah`,COUNT(`inv_inventaris_barang`.`id_inventaris_barang`) AS `jumlah`,SUM(`inv_inventaris_barang`.`harga`) AS `totalharga` FROM ((((((((`inv_inventaris_barang_f` JOIN `inv_inventaris_barang` ON(((`inv_inventaris_barang`.`id_inventaris_barang` = `inv_inventaris_barang_f`.`id_inventaris_barang`) AND (`inv_inventaris_barang`.`id_mst_inv_barang` = `inv_inventaris_barang_f`.`id_mst_inv_barang`)))) JOIN `mst_inv_barang` ON((`mst_inv_barang`.`code` = `inv_inventaris_barang_f`.`id_mst_inv_barang`))) LEFT JOIN `mst_inv_pilihan` `tingkat` ON(((CONVERT(`inv_inventaris_barang_f`.`pilihan_konstruksi_bertingkat` USING utf8) = `tingkat`.`code`) AND (`tingkat`.`tipe` = 'kons_tingkat')))) LEFT JOIN `mst_inv_pilihan` `beton` ON(((CONVERT(`inv_inventaris_barang_f`.`pilihan_konstruksi_beton` USING utf8) = `beton`.`code`) AND (`beton`.`tipe` = 'kons_beton')))) LEFT JOIN `mst_inv_pilihan` `tanah` ON(((CONVERT(`inv_inventaris_barang_f`.`pilihan_status_tanah` USING utf8) = `tanah`.`code`) AND (`tanah`.`tipe` = 'status_hak')))) LEFT JOIN `mst_inv_pilihan` `asal_usul` ON(((CONVERT(`inv_inventaris_barang`.`pilihan_asal` USING utf8) = `asal_usul`.`code`) AND (`asal_usul`.`tipe` = 'asal_usul')))) LEFT JOIN `mst_inv_pilihan` `keadaan_barang` ON(((CONVERT(`inv_inventaris_barang`.`pilihan_keadaan_barang` USING utf8) = `keadaan_barang`.`code`) AND (`keadaan_barang`.`tipe` = 'keadaan_barang')))) LEFT JOIN `inv_inventaris_distribusi` ON((`inv_inventaris_barang`.`id_inventaris_barang` = `inv_inventaris_distribusi`.`id_inventaris_barang`))) WHERE (`inv_inventaris_barang`.`id_pengadaan` = 0) GROUP BY `inv_inventaris_barang`.`barang_kembar_proc`) UNION (SELECT `asal_usul`.`value` AS `asal_usul`,`inv_inventaris_barang`.`keterangan_pengadaan` AS `keterangan_pengadaan`,`keadaan_barang`.`value` AS `keadaan_barang`,`inv_inventaris_distribusi`.`id_ruangan` AS `id_ruangan`,`inv_inventaris_barang`.`harga` AS `harga`,`inv_inventaris_distribusi`.`id_cl_phc` AS `id_cl_phc`,`inv_inventaris_distribusi`.`register` AS `register`,`inv_inventaris_barang`.`pilihan_status_invetaris` AS `pilihan_status_invetaris`,`mst_inv_barang`.`uraian` AS `uraian`,`tingkat`.`value` AS `tingkat`,`beton`.`value` AS `beton`,`tanah`.`value` AS `tanah`,`inv_inventaris_barang`.`barang_kembar_proc` AS `barang_kembar_proc`,`inv_inventaris_barang`.`id_pengadaan` AS `id_pengadaan`,`inv_inventaris_barang_f`.`id_inventaris_barang` AS `id_inventaris_barang`,`inv_inventaris_barang_f`.`id_mst_inv_barang` AS `id_mst_inv_barang`,`inv_inventaris_barang_f`.`bangunan` AS `bangunan`,`inv_inventaris_barang_f`.`pilihan_konstruksi_bertingkat` AS `pilihan_konstruksi_bertingkat`,`inv_inventaris_barang_f`.`pilihan_konstruksi_beton` AS `pilihan_konstruksi_beton`,`inv_inventaris_barang_f`.`luas` AS `luas`,`inv_inventaris_barang_f`.`lokasi` AS `lokasi`,`inv_inventaris_barang_f`.`dokumen_tanggal` AS `dokumen_tanggal`,`inv_inventaris_barang_f`.`dokumen_nomor` AS `dokumen_nomor`,`inv_inventaris_barang_f`.`tanggal_mulai` AS `tanggal_mulai`,`inv_inventaris_barang_f`.`pilihan_status_tanah` AS `pilihan_status_tanah`,COUNT(`inv_inventaris_barang`.`id_inventaris_barang`) AS `jumlah`,SUM(`inv_inventaris_barang`.`harga`) AS `totalharga` FROM (((((((((`inv_inventaris_barang_f` JOIN `inv_inventaris_barang` ON(((`inv_inventaris_barang`.`id_inventaris_barang` = `inv_inventaris_barang_f`.`id_inventaris_barang`) AND (`inv_inventaris_barang`.`id_mst_inv_barang` = `inv_inventaris_barang_f`.`id_mst_inv_barang`)))) JOIN `mst_inv_barang` ON((`mst_inv_barang`.`code` = `inv_inventaris_barang_f`.`id_mst_inv_barang`))) LEFT JOIN `mst_inv_pilihan` `tingkat` ON(((CONVERT(`inv_inventaris_barang_f`.`pilihan_konstruksi_bertingkat` USING utf8) = `tingkat`.`code`) AND (`tingkat`.`tipe` = 'kons_tingkat')))) LEFT JOIN `mst_inv_pilihan` `beton` ON(((CONVERT(`inv_inventaris_barang_f`.`pilihan_konstruksi_beton` USING utf8) = `beton`.`code`) AND (`beton`.`tipe` = 'kons_beton')))) LEFT JOIN `mst_inv_pilihan` `tanah` ON(((CONVERT(`inv_inventaris_barang_f`.`pilihan_status_tanah` USING utf8) = `tanah`.`code`) AND (`tanah`.`tipe` = 'status_hak')))) LEFT JOIN `mst_inv_pilihan` `asal_usul` ON(((CONVERT(`inv_inventaris_barang`.`pilihan_asal` USING utf8) = `asal_usul`.`code`) AND (`asal_usul`.`tipe` = 'asal_usul')))) LEFT JOIN `mst_inv_pilihan` `keadaan_barang` ON(((CONVERT(`inv_inventaris_barang`.`pilihan_keadaan_barang` USING utf8) = `keadaan_barang`.`code`) AND (`keadaan_barang`.`tipe` = 'keadaan_barang')))) JOIN `inv_pengadaan` ON(((`inv_pengadaan`.`id_pengadaan` = `inv_inventaris_barang`.`id_pengadaan`) AND (`inv_pengadaan`.`pilihan_status_pengadaan` = 4)))) LEFT JOIN `inv_inventaris_distribusi` ON((`inv_inventaris_barang`.`id_inventaris_barang` = `inv_inventaris_distribusi`.`id_inventaris_barang`))) GROUP BY `inv_inventaris_barang`.`barang_kembar_proc`)$$

DELIMITER ;

DELIMITER $$

USE `epus_org_3172100`$$

DROP VIEW IF EXISTS `kibe`$$

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `kibe` AS (SELECT `asal_usul`.`value` AS `asal_usul`,`inv_inventaris_barang`.`keterangan_pengadaan` AS `keterangan_pengadaan`,`keadaan_barang`.`value` AS `keadaan_barang`,`inv_inventaris_distribusi`.`id_ruangan` AS `id_ruangan`,`inv_inventaris_barang`.`harga` AS `harga`,`inv_inventaris_distribusi`.`id_cl_phc` AS `id_cl_phc`,`inv_inventaris_distribusi`.`register` AS `register`,`inv_inventaris_barang`.`pilihan_status_invetaris` AS `pilihan_status_invetaris`,`mst_inv_barang`.`uraian` AS `uraian`,`bahan`.`value` AS `bahan`,`satuan`.`value` AS `satuan`,`inv_inventaris_barang`.`barang_kembar_proc` AS `barang_kembar_proc`,`inv_inventaris_barang`.`id_pengadaan` AS `id_pengadaan`,`inv_inventaris_barang_e`.`id_inventaris_barang` AS `id_inventaris_barang`,`inv_inventaris_barang_e`.`id_mst_inv_barang` AS `id_mst_inv_barang`,`inv_inventaris_barang_e`.`buku_judul_pencipta` AS `buku_judul_pencipta`,`inv_inventaris_barang_e`.`buku_spesifikasi` AS `buku_spesifikasi`,`inv_inventaris_barang_e`.`budaya_asal_daerah` AS `budaya_asal_daerah`,`inv_inventaris_barang_e`.`budaya_pencipta` AS `budaya_pencipta`,`inv_inventaris_barang_e`.`pilihan_budaya_bahan` AS `pilihan_budaya_bahan`,`inv_inventaris_barang_e`.`flora_fauna_jenis` AS `flora_fauna_jenis`,`inv_inventaris_barang_e`.`flora_fauna_ukuran` AS `flora_fauna_ukuran`,`inv_inventaris_barang_e`.`pilihan_satuan` AS `pilihan_satuan`,`inv_inventaris_barang_e`.`tahun_cetak_beli` AS `tahun_cetak_beli`,COUNT(`inv_inventaris_barang`.`id_inventaris_barang`) AS `jumlah`,SUM(`inv_inventaris_barang`.`harga`) AS `totalharga` FROM (((((((`inv_inventaris_barang_e` JOIN `inv_inventaris_barang` ON(((`inv_inventaris_barang`.`id_inventaris_barang` = `inv_inventaris_barang_e`.`id_inventaris_barang`) AND (`inv_inventaris_barang`.`id_mst_inv_barang` = `inv_inventaris_barang_e`.`id_mst_inv_barang`)))) JOIN `mst_inv_barang` ON((`mst_inv_barang`.`code` = `inv_inventaris_barang_e`.`id_mst_inv_barang`))) LEFT JOIN `mst_inv_pilihan` `bahan` ON(((CONVERT(`inv_inventaris_barang_e`.`pilihan_budaya_bahan` USING utf8) = `bahan`.`code`) AND (`bahan`.`tipe` = 'bahan')))) LEFT JOIN `mst_inv_pilihan` `satuan` ON(((CONVERT(`inv_inventaris_barang_e`.`pilihan_satuan` USING utf8) = `satuan`.`code`) AND (`satuan`.`tipe` = 'satuan')))) LEFT JOIN `mst_inv_pilihan` `asal_usul` ON(((CONVERT(`inv_inventaris_barang`.`pilihan_asal` USING utf8) = `asal_usul`.`code`) AND (`asal_usul`.`tipe` = 'asal_usul')))) LEFT JOIN `mst_inv_pilihan` `keadaan_barang` ON(((CONVERT(`inv_inventaris_barang`.`pilihan_keadaan_barang` USING utf8) = `keadaan_barang`.`code`) AND (`keadaan_barang`.`tipe` = 'keadaan_barang')))) LEFT JOIN `inv_inventaris_distribusi` ON((`inv_inventaris_barang`.`id_inventaris_barang` = `inv_inventaris_distribusi`.`id_inventaris_barang`))) WHERE (`inv_inventaris_barang`.`id_pengadaan` = 0) GROUP BY `inv_inventaris_barang`.`barang_kembar_proc`) UNION (SELECT `asal_usul`.`value` AS `asal_usul`,`inv_inventaris_barang`.`keterangan_pengadaan` AS `keterangan_pengadaan`,`keadaan_barang`.`value` AS `keadaan_barang`,`inv_inventaris_distribusi`.`id_ruangan` AS `id_ruangan`,`inv_inventaris_barang`.`harga` AS `harga`,`inv_inventaris_distribusi`.`id_cl_phc` AS `id_cl_phc`,`inv_inventaris_distribusi`.`register` AS `register`,`inv_inventaris_barang`.`pilihan_status_invetaris` AS `pilihan_status_invetaris`,`mst_inv_barang`.`uraian` AS `uraian`,`bahan`.`value` AS `bahan`,`satuan`.`value` AS `satuan`,`inv_inventaris_barang`.`barang_kembar_proc` AS `barang_kembar_proc`,`inv_inventaris_barang`.`id_pengadaan` AS `id_pengadaan`,`inv_inventaris_barang_e`.`id_inventaris_barang` AS `id_inventaris_barang`,`inv_inventaris_barang_e`.`id_mst_inv_barang` AS `id_mst_inv_barang`,`inv_inventaris_barang_e`.`buku_judul_pencipta` AS `buku_judul_pencipta`,`inv_inventaris_barang_e`.`buku_spesifikasi` AS `buku_spesifikasi`,`inv_inventaris_barang_e`.`budaya_asal_daerah` AS `budaya_asal_daerah`,`inv_inventaris_barang_e`.`budaya_pencipta` AS `budaya_pencipta`,`inv_inventaris_barang_e`.`pilihan_budaya_bahan` AS `pilihan_budaya_bahan`,`inv_inventaris_barang_e`.`flora_fauna_jenis` AS `flora_fauna_jenis`,`inv_inventaris_barang_e`.`flora_fauna_ukuran` AS `flora_fauna_ukuran`,`inv_inventaris_barang_e`.`pilihan_satuan` AS `pilihan_satuan`,`inv_inventaris_barang_e`.`tahun_cetak_beli` AS `tahun_cetak_beli`,COUNT(`inv_inventaris_barang`.`id_inventaris_barang`) AS `jumlah`,SUM(`inv_inventaris_barang`.`harga`) AS `totalharga` FROM ((((((((`inv_inventaris_barang_e` JOIN `inv_inventaris_barang` ON(((`inv_inventaris_barang`.`id_inventaris_barang` = `inv_inventaris_barang_e`.`id_inventaris_barang`) AND (`inv_inventaris_barang`.`id_mst_inv_barang` = `inv_inventaris_barang_e`.`id_mst_inv_barang`)))) JOIN `mst_inv_barang` ON((`mst_inv_barang`.`code` = `inv_inventaris_barang_e`.`id_mst_inv_barang`))) LEFT JOIN `mst_inv_pilihan` `bahan` ON(((CONVERT(`inv_inventaris_barang_e`.`pilihan_budaya_bahan` USING utf8) = `bahan`.`code`) AND (`bahan`.`tipe` = 'bahan')))) LEFT JOIN `mst_inv_pilihan` `satuan` ON(((CONVERT(`inv_inventaris_barang_e`.`pilihan_satuan` USING utf8) = `satuan`.`code`) AND (`satuan`.`tipe` = 'satuan')))) LEFT JOIN `inv_pengadaan` ON(((`inv_pengadaan`.`id_pengadaan` = `inv_inventaris_barang`.`id_pengadaan`) AND (`inv_pengadaan`.`pilihan_status_pengadaan` = 4)))) LEFT JOIN `mst_inv_pilihan` `asal_usul` ON(((CONVERT(`inv_inventaris_barang`.`pilihan_asal` USING utf8) = `asal_usul`.`code`) AND (`asal_usul`.`tipe` = 'asal_usul')))) LEFT JOIN `mst_inv_pilihan` `keadaan_barang` ON(((CONVERT(`inv_inventaris_barang`.`pilihan_keadaan_barang` USING utf8) = `keadaan_barang`.`code`) AND (`keadaan_barang`.`tipe` = 'keadaan_barang')))) LEFT JOIN `inv_inventaris_distribusi` ON((`inv_inventaris_barang`.`id_inventaris_barang` = `inv_inventaris_distribusi`.`id_inventaris_barang`))) GROUP BY `inv_inventaris_barang`.`barang_kembar_proc`)$$

DELIMITER ;